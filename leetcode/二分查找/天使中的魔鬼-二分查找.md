## 二分查找是天使

时间复杂度：$O(\log{N})$  
空间复杂度：$O(1)$

我想这辈子经常见到的时间复杂度，最强是$O(1)$，其次就是$O(\log{N})$。各种查找算法中，哈希能做到平均$O(1)$，但要付出$O(N)$的空间代价。而二分查找只需要$O(1)$的空间：`left`，`right`和`mid`三个指针，时间上也只有$O(\log{N})$，这已经很快了。

不过非常可惜的是，二分查找需要**有序**或**部分有序**为前提。好在许多问题中，这个条件并不苛刻。这里特别强调「部分有序」的理解：只要二分法最终能收敛到一个局部有序的范围上，那么就可以利用二分法。例如：查找数组（序列）中的极值（leetcode 162）。

## 二分查找是魔鬼

> 尽管二分查找的基本思想相对简单，但细节可以令人难以招架。—— 高德纳

当乔恩·本特利将二分搜索问题布置给专业编程课的学生时，90%的学生在花费数小时后还是无法给出正确的解答，主要因为这些错误程序在面对边界值的时候无法运行，或返回错误结果。1988年开展的一项研究显示，20本教科书里只有5本正确实现了二分搜索。不仅如此，本特利自己1986年出版的《编程珠玑》一书中的二分搜索算法存在整数溢出的问题，二十多年来无人发现。Java语言的库所实现的二分搜索算法中同样的溢出问题存在了九年多才被修复。

这些过往说明二分查找是一个极其细致的算法，覆盖所有边界条件是正确实现二分查找的最关键因素。另一方面，二分查找要解决的基础问题是：查找给定的目标值。该问题可以演变出很多更广义的查找问题：查找序列满足给定条件的左、右边界，数值（值域）二分法，部分有序数组查找最值，等等。因此，针对这些变形问题，本就非常强调边界正确性的二分法该如何进行调整？这要求我们对二分法建立一个系统的"方法论"，通俗点说就是建立一个合理普适的思考方式。

幸运的是，前人已经总结出了一套逻辑严谨，直接贴近二分法本质的方法论。
